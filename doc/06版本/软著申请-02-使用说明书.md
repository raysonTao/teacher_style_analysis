# 教师教学风格画像分析系统V1.0 使用说明书

**软件名称**：教师教学风格画像分析系统V1.0
**版本号**：V1.0
**编制日期**：2026年01月
**编制单位**：[申请人姓名]

---

## 目录

1. [软件概述](#1-软件概述)
2. [运行环境](#2-运行环境)
3. [安装与配置](#3-安装与配置)
4. [系统登录](#4-系统登录)
5. [功能使用](#5-功能使用)
6. [常见问题](#6-常见问题)
7. [技术支持](#7-技术支持)

---

## 1. 软件概述

### 1.1 软件简介

教师教学风格画像分析系统是一款基于人工智能技术的教学分析工具，能够自动处理课堂录像，识别教师的教学风格，并生成可视化的风格画像报告。系统采用多模态深度学习技术，综合分析教师的语言表达、肢体动作、课堂互动等多维度特征，为教师专业发展提供客观、精准的数据支撑。

### 1.2 主要功能

| 功能模块 | 功能描述 |
|---------|---------|
| 课程管理 | 上传、管理、查看课堂录像 |
| 智能分析 | 自动提取多模态特征，识别教学风格 |
| 风格画像 | 生成七维风格雷达图、行为时序图、情感曲线 |
| 典型片段 | 自动提取最具代表性的教学片段 |
| 个性化反馈 | 基于风格分析结果生成改进建议 |
| 成长追踪 | 对比不同时期的教学风格变化 |
| 报告导出 | 导出PDF格式的完整分析报告 |

### 1.3 支持的教学风格类型

系统可识别以下七类教学风格：

1. **理论讲授型**：侧重知识点系统讲解，板书频繁，逻辑性强
2. **启发引导型**：善于提问引导，等待学生思考，注重思维培养
3. **互动导向型**：师生互动频繁，学生参与度高，课堂氛围活跃
4. **逻辑推导型**：强调推理过程，使用大量逻辑连接词，结构严谨
5. **题目驱动型**：以习题讲解为主，讲练结合，注重实践应用
6. **情感表达型**：情绪表达丰富，语言富有感染力，善用鼓励
7. **耐心细致型**：讲解速度慢，重复强调关键点，关注学生接受程度

---

## 2. 运行环境

### 2.1 硬件要求

| 配置项 | 最低配置 | 推荐配置 |
|--------|---------|---------|
| CPU | Intel Core i5 四核 | Intel Core i7 八核 |
| GPU | NVIDIA GTX 1060 (6GB) | NVIDIA RTX 3060 (12GB) |
| 内存 | 8GB DDR4 | 16GB DDR4 |
| 硬盘 | 50GB可用空间 | 100GB SSD |
| 网络 | 10Mbps | 100Mbps |

### 2.2 软件环境

| 软件 | 版本要求 |
|-----|---------|
| 操作系统 | Ubuntu 22.04 LTS / Windows 10 / macOS 12+ |
| Python | 3.9 或以上 |
| CUDA | 11.8 （GPU版本） |
| Web浏览器 | Chrome 90+ / Firefox 88+ / Safari 14+ |

### 2.3 支持的视频格式

- **视频格式**：MP4, AVI, MOV, MKV
- **视频编码**：H.264, H.265
- **分辨率**：720p 及以上（推荐1080p）
- **帧率**：25fps 或 30fps
- **时长**：建议10分钟至60分钟单节课

---

## 3. 安装与配置

### 3.1 Linux系统安装

#### 步骤1：安装系统依赖

```bash
# 更新系统包
sudo apt update && sudo apt upgrade -y

# 安装基础依赖
sudo apt install -y python3.9 python3-pip git ffmpeg

# 安装GPU驱动（如有NVIDIA显卡）
sudo apt install -y nvidia-driver-525
```

#### 步骤2：下载系统代码

```bash
# 克隆代码仓库
git clone https://github.com/username/teacher_style_analysis.git
cd teacher_style_analysis

# 或解压发布包
unzip teacher_style_analysis_v1.0.zip
cd teacher_style_analysis
```

#### 步骤3：创建虚拟环境

```bash
# 创建Python虚拟环境
python3 -m venv venv

# 激活虚拟环境
source venv/bin/activate
```

#### 步骤4：安装Python依赖

```bash
# 安装CPU版本
pip install -r requirements.txt

# 或安装GPU版本（需要CUDA）
pip install -r requirements-gpu.txt
```

#### 步骤5：初始化数据库

```bash
# 安装PostgreSQL
sudo apt install -y postgresql postgresql-contrib

# 创建数据库
sudo -u postgres createdb teacher_style_db

# 运行数据库迁移
python manage.py db upgrade
```

#### 步骤6：下载预训练模型

```bash
# 下载模型文件（约2.5GB）
bash scripts/download_models.sh

# 或手动下载后放置到checkpoints/目录
# - checkpoints/yolov8n.pt
# - checkpoints/wav2vec2-base-960h/
# - checkpoints/bert-base-chinese/
# - checkpoints/best_model.pth
```

#### 步骤7：启动系统

```bash
# 启动后端服务
python app.py

# 启动前端（新终端）
cd frontend
npm install
npm run serve
```

系统将在 `http://localhost:5000` 启动。

### 3.2 Windows系统安装

#### 步骤1：安装Python

1. 下载Python 3.9安装包：https://www.python.org/downloads/
2. 运行安装程序，勾选"Add Python to PATH"
3. 验证安装：打开命令提示符，输入 `python --version`

#### 步骤2：安装Git

1. 下载Git安装包：https://git-scm.com/download/win
2. 运行安装程序，使用默认选项

#### 步骤3：安装FFmpeg

1. 下载FFmpeg：https://ffmpeg.org/download.html
2. 解压到 `C:\ffmpeg`
3. 添加到系统PATH环境变量：`C:\ffmpeg\bin`

#### 步骤4：下载并安装系统

```cmd
# 克隆代码
git clone https://github.com/username/teacher_style_analysis.git
cd teacher_style_analysis

# 创建虚拟环境
python -m venv venv
venv\Scripts\activate

# 安装依赖
pip install -r requirements.txt

# 下载模型
python scripts/download_models.py

# 启动系统
python app.py
```

### 3.3 配置文件说明

系统配置文件位于 `config/config.yaml`，主要配置项如下：

```yaml
# 系统基础配置
system:
  host: '0.0.0.0'
  port: 5000
  debug: false
  secret_key: 'your-secret-key-here'

# 数据库配置
database:
  type: 'postgresql'
  host: 'localhost'
  port: 5432
  username: 'postgres'
  password: 'your-password'
  database: 'teacher_style_db'

# Redis缓存配置
redis:
  host: 'localhost'
  port: 6379
  db: 0

# 文件存储配置
storage:
  upload_folder: 'uploads/'
  max_file_size: 2147483648  # 2GB
  allowed_extensions: ['mp4', 'avi', 'mov', 'mkv']

# 模型配置
model:
  device: 'cuda'  # 或 'cpu'
  batch_size: 16
  num_workers: 4
  checkpoint_path: 'checkpoints/best_model.pth'

# 日志配置
logging:
  level: 'INFO'
  file: 'logs/system.log'
  max_bytes: 10485760  # 10MB
  backup_count: 5
```

---

## 4. 系统登录

### 4.1 访问系统

在浏览器中打开系统地址（默认为 `http://localhost:5000`），将看到登录界面。

### 4.2 注册账号

首次使用需要注册账号：

1. 点击登录页面的"注册账号"按钮
2. 填写注册信息：
   - 用户名：3-20个字符，支持中英文
   - 邮箱：有效的电子邮箱地址
   - 密码：至少8位，包含字母和数字
   - 确认密码：与密码一致
3. 点击"注册"按钮
4. 系统将发送验证邮件到注册邮箱
5. 点击邮件中的验证链接完成注册

### 4.3 登录系统

使用注册的用户名/邮箱和密码登录系统。

**首次登录提示**：
- 系统将引导进行简单的功能介绍
- 可以跳过教程，直接进入主界面

---

## 5. 功能使用

### 5.1 上传课程视频

#### 操作步骤

1. 点击导航栏的"课程管理"菜单
2. 点击"上传课程"按钮
3. 填写课程基本信息：
   - **课程名称**：例如"高中数学-导数的应用"
   - **教师姓名**：授课教师姓名
   - **学科**：从下拉菜单选择（语文、数学、英语等）
   - **学段**：小学/初中/高中/大学
   - **课程类型**：新授课/复习课/习题课/实验课
   - **录制日期**：视频录制日期
4. 点击"选择文件"，选择课堂录像文件
5. 点击"开始上传"

#### 上传进度

- 系统将显示实时上传进度条
- 上传完成后自动跳转到课程详情页
- 大文件上传可能需要几分钟，请耐心等待

#### 注意事项

- 单个视频文件大小不超过2GB
- 建议上传前使用视频压缩工具适当压缩
- 确保视频清晰度至少为720p
- 视频中教师应清晰可见，避免长时间遮挡

### 5.2 开始智能分析

#### 自动分析

上传完成后，系统将自动开始分析：

1. **视频预处理**（约1-2分钟）
   - 视频格式转换
   - 关键帧提取
   - 音频分离

2. **特征提取**（约3-5分钟）
   - 视频分析：教师检测、行为识别
   - 音频分析：语音识别、情感提取
   - 文本分析：对话行为识别

3. **风格识别**（约1分钟）
   - MMAN模型推理
   - 风格分类与打分

4. **报告生成**（约1分钟）
   - 生成可视化图表
   - 提取典型片段
   - 生成改进建议

#### 查看分析进度

- 在"课程管理"页面可以看到分析状态
- 状态标签：待分析 / 分析中 / 已完成 / 分析失败
- 分析中的课程会显示进度百分比

#### 手动重新分析

如果对分析结果不满意，可以手动重新分析：

1. 进入课程详情页
2. 点击右上角"重新分析"按钮
3. 确认后系统将��新执行分析流程

### 5.3 查看风格画像

#### 进入画像页面

1. 在"课程管理"页面，点击已完成分析的课程卡片
2. 或点击课程卡片上的"查看画像"按钮

#### 风格画像组成

**（1）风格雷达图**

位于页面顶部的七维雷达图，展示教师在七类教学风格上的得分：

- 每个轴代表一种教学风格
- 分值范围0-1，越接近外圈表示该风格越突出
- 鼠标悬停可查看具体分值
- 可导出为PNG图片

**示例解读**：
```
理论讲授型: 0.78 （主导风格）
启发引导型: 0.45
互动导向型: 0.32
逻辑推导型: 0.65
题目驱动型: 0.56
情感表达型: 0.23
耐心细致型: 0.51
```

该教师主要呈现"理论讲授型"特征，同时具有"逻辑推导型"和"题目驱动型"倾向。

**（2）行为时序图**

展示整节课中教师行为的时间分布：

- **横轴**：课堂时间轴（分钟）
- **纵轴**：行为类别（讲解、板书、走动、互动等）
- **颜色块**：不同颜色代表不同行为
- **交互功能**：
  - 点击某个时间段，可跳转到视频对应位置
  - 鼠标悬停显示该时段的详细信息

**（3）情感曲线图**

展示教师语音情感的变化趋势：

- **横轴**：课堂时间轴
- **纵轴**：情绪强度（-1到1，负值为负面情绪，正值为正面情绪）
- **曲线**：实时情感变化
- **关键点标注**：情绪高峰和低谷点

**（4）关键词云图**

展示教师课堂语言的高频词汇：

- 字体大小表示词频高低
- 不同颜色区分词性（名词、动词、形容词等）
- 点击词汇可查看该词出现的所有时间点

**（5）模态贡献度**

展示视频、音频、文本三种模态对风格判定的贡献：

```
视频模态: 33%  （教师行为特征）
音频模态: 28%  （语音情感特征）
文本模态: 27%  （教学意图特征）
规则特征: 12%  （教育学规则）
```

**（6）SHAP特征解释**

展示最具区分力的特征及其对风格判定的贡献：

**全局特征重要性（Top 10）**：
1. 提问频率: 0.24
2. 走动范围: 0.18
3. 语速变化: 0.15
4. 板书时长: 0.12
5. 学生话语占比: 0.11
...

**局部样本解释**（瀑布图）：
```
被识别为"启发引导型"的原因：
+ 提问频率高 (+0.31)
+ 走动频繁 (+0.18)
+ 等待时长长 (+0.12)
+ 语调上扬 (+0.09)
- 板书时长短 (-0.08)
= 最终预测: 启发引导型 (0.78)
```

### 5.4 查看典型片段

#### 片段自动提取

系统根据风格特征自动提取最具代表性的教学片段（每个片段10-30秒）：

- **启发引导型**：提取提问密集、学生互动频繁的片段
- **情感表达型**：提取情绪波动显著、语言富有感染力的片段
- **理论讲授型**：提取讲解连贯、板书清晰的片段

#### 片段播放

1. 在"典型片段"模块，可以看到3-5个自动提取的片段
2. 每个片段显示：
   - 缩略图
   - 时间戳（例如：05:23 - 05:45）
   - 片段标签（例如："高频提问场景"）
   - SHAP贡献分值
3. 点击播放按钮观看片段
4. 点击"在完整视频中查看"跳转到原视频对应位置

### 5.5 获取个性化反馈

#### 风格匹配度评估

系统计算教师当前风格与目标风格的匹配度（SMI指数）：

```
SMI（风格匹配指数）= Σ w_i * s_i

其中：
- w_i: 第i个风格维度的理想权重
- s_i: 第i个风格维度的实际得分
```

**示例**：
```
目标风格: 启发引导型
当前SMI: 0.68
匹配度评价: 中等匹配

建议优化方向:
- 提问频率 ↑ 需要提升
- 等待时长 ↑ 需要提升
- 互动频次 ↑ 需要提升
```

#### 改进建议

系统基于风格分析结果，生成3-5条具体的改进建议：

**示例建议**：

1. **增加提问频次**
   - 当前状态：平均每10分钟提问2.3次
   - 建议目标：每10分钟提问4-6次
   - 实施策略：在知识点讲解后，设计2-3个渐进式问题，引导学生思考

2. **延长等待时长**
   - 当前状态：提问后平均等待1.8秒
   - 建议目标：等待3-5秒
   - 实施策略：提问后有意识地数"3秒"再补充说明或点名

3. **增加空间移动**
   - 当前状态：90%时间在讲台区域
   - 建议目标：30-40%时间在学生区域
   - 实施策略：讲解过程中走到学生中间，观察学生表情，增强互动感

### 5.6 成长追踪

#### 横向对比

对比本节课与历史课程的风格变化：

1. 在课程详情页点击"成长追踪"标签
2. 选择要对比的历史课程（最多5节）
3. 查看风格雷达图的叠加对比
4. 查看各维度得分的折线图

#### 纵向追踪

查看教师风格的长期演变趋势：

1. 在"个人中心"页面点击"成长曲线"
2. 系统展示时间轴上所有课程的风格变化
3. 可按学科、学段筛选
4. 查看关键转折点（例如：参加培训后风格变化）

#### 里程碑记录

系统自动记录重要的成长里程碑：

- 首次达到某风格0.8分以上
- 某维度提升超过0.2分
- SMI指数突破0.75

### 5.7 导出分析报告

#### 报告格式

系统支持导出PDF格式的完整分析报告，包含：

- 课程基本信息
- 风格画像（雷达图、行为图、情感曲线）
- 典型片段截图
- 特征解释
- 改进建议
- 历史对比（如有）

#### 导出步骤

1. 在课程详情页点击右上角"导出报告"按钮
2. 选择报告模板：
   - **标准模板**：适合教师个人查看
   - **简洁模板**：适合快速浏览
   - **详细模板**：适合教研分析
3. 点击"生成PDF"
4. 等待3-5秒后自动下载

#### 批量导出

在"课程管理"页面：

1. 勾选多个课程
2. 点击"批量导出"
3. 系统将生成一个汇总报告，包含所有课程的对比分析

---

## 6. 常见问题

### 6.1 安装与配置

**Q1: 安装依赖时出现网络错误怎么办？**

A: 可以使用国内镜像源加速：

```bash
# 使用清华镜像
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

**Q2: GPU版本安装后仍然使用CPU运行？**

A: 检查CUDA和PyTorch是否正确安装：

```bash
# 检查CUDA
nvidia-smi

# 检查PyTorch GPU支持
python -c "import torch; print(torch.cuda.is_available())"
```

如果返回`False`，需要重新安装GPU版本的PyTorch：

```bash
pip install torch==2.0.1 torchvision==0.15.2 --index-url https://download.pytorch.org/whl/cu118
```

**Q3: 数据库连接失败？**

A: 检查PostgreSQL服务是否启动：

```bash
# Linux
sudo systemctl status postgresql

# Windows
# 在"服务"中查看PostgreSQL服务状态
```

确认`config/config.yaml`中的数据库配置正确。

### 6.2 视频上传

**Q4: 上传视频时提示"格式不支持"？**

A: 系统支持MP4, AVI, MOV, MKV格式。如果视频格式正确但仍报错，可能是编码问题，使用FFmpeg转换：

```bash
ffmpeg -i input.avi -c:v libx264 -c:a aac output.mp4
```

**Q5: 上传大文件时超时？**

A: 修改`config/config.yaml`中的超时设置：

```yaml
upload:
  timeout: 600  # 增加到600秒
```

或使用视频压缩工具减小文件大小。

**Q6: 上传后视频无法播放？**

A: 检查浏览器是否支持该视频编码。建议转换为H.264编码的MP4格式。

### 6.3 分析与结果

**Q7: 分析过程中出现"分析失败"？**

A: 可能原因和解决方法：

1. **视频质量过差**：确保分辨率至少720p，教师清晰可见
2. **视频时长过短**：建议至少10分钟
3. **系统资源不足**：检查GPU显存是否充足（至少6GB）
4. **模型文件缺失**：运行`bash scripts/download_models.sh`重新下载

查看详细错误日志：

```bash
tail -f logs/system.log
```

**Q8: 风格识别结果与主观感受不符？**

A: 可能原因：

1. **样本特殊性**：该节课可能不是教师的典型风格
2. **多风格混合**：教师可能同时具有多种风格特征，查看雷达图的整体分布
3. **录像质量**：视频模糊、音频噪声大会影响识别准确率

建议：
- 上传多节课程进行综合分析
- 查看SHAP特征解释，理解判定依据
- 参考典型片段验证

**Q9: 典型片段提取不准确？**

A: 典型片段基于SHAP贡献度自动提取。如果不满意，可以手动标注：

1. 播放完整视频
2. 点击"添加自定义片段"
3. 设置起止时间和标签

**Q10: 改进建议过于笼统？**

A: 改进建议基于统计规则生成。后续版本将引入更智能的建议引擎。目前建议结合SHAP特征解释和典型片段，自行总结改进方向。

### 6.4 性能优化

**Q11: 分析速度很慢？**

A: 优化建议：

1. **使用GPU加速**：确保config中`device: 'cuda'`
2. **减小batch_size**：如果显存不足，降低`batch_size`
3. **关闭其他程序**：释放GPU显存和内存
4. **批量分析**：多个课程可以批量提交，系统会自动排队处理

**Q12: 系统占用显存过高？**

A: 修改`config/config.yaml`：

```yaml
model:
  batch_size: 8  # 降低batch size
  num_workers: 2  # 减少数据加载线程
```

### 6.5 其他问题

**Q13: 忘记密码怎么办？**

A: 在登录页面点击"忘记密码"，输入注册邮箱，系统将发送重置链接。

**Q14: 如何删除课程？**

A: 在"课程管理"页面，点击课程卡片的"删除"按钮。注意：删除后数据无法恢复，建议先导出报告。

**Q15: 可以同时分析多节课吗？**

A: 可以。系统支持任务队列，可以同时上传多个课程，系统会按顺序自动处理。单个课程的分析时长约5-10分钟。

**Q16: 支持移动端访问吗？**

A: Web界面采用响应式设计，支持手机和平板访问。但由于视频播放和图表交互的限制，建议使用电脑浏览器获得最佳体验。

---

## 7. 技术支持

### 7.1 联系方式

如遇到技术问题，可通过以下方式联系：

- **技术支持邮箱**：support@example.com
- **问题反馈**：在系统内点击右下角"反馈"按钮
- **在线文档**：https://docs.example.com
- **视频教程**：https://tutorial.example.com

### 7.2 日志收集

报告问题时，请附上系统日志以便快速定位：

```bash
# 收集日志
cd teacher_style_analysis
tar -czf logs.tar.gz logs/

# 发送logs.tar.gz到技术支持邮箱
```

### 7.3 版本更新

系统会定期发布更新版本，建议关注：

- 在系统首页会提示新版本信息
- 访问官网查看更新日志
- 使用`git pull`获取最新代码

### 7.4 用户社区

加入用户社区，与其他教师交流使用经验：

- **QQ群**：123456789
- **微信公众号**：教师风格画像
- **论坛**：https://forum.example.com

---

## 附录A：快速操作指南

| 操作 | 步骤 |
|-----|-----|
| 上传课程 | 课程管理 → 上传课程 → 填写信息 → 选择文件 → 上传 |
| 查看画像 | 课程管理 → 选择课程 → 查看画像 |
| 导出报告 | 课程详情 → 导出报告 → 选择模板 → 生成PDF |
| 成长追踪 | 个人中心 → 成长曲线 |
| 修改配置 | 编辑config/config.yaml → 重启系统 |
| 查看日志 | tail -f logs/system.log |

---

## 附录B：键盘快捷键

| 快捷键 | 功能 |
|-------|-----|
| Ctrl + U | 上传课程 |
| Ctrl + R | 刷新页面 |
| Space | 播放/暂停视频 |
| ← / → | 视频快退/快进5秒 |
| ↑ / ↓ | 音量增加/减小 |
| F | 全屏播放 |
| Esc | 退出全屏 |

---

## 附录C：术语表

| 术语 | 解释 |
|-----|-----|
| MMAN | Multi-Modal Attention Network，跨模态注意力网络 |
| SHAP | SHapley Additive exPlanations，模型解释方法 |
| SMI | Style Matching Index，风格匹配指数 |
| DeepSORT | 深度学习目标跟踪算法 |
| ST-GCN | Spatial-Temporal Graph Convolutional Network，时空图卷积网络 |
| Wav2Vec2 | 自监督语音表征学习模型 |
| BERT | Bidirectional Encoder Representations from Transformers |
| IoU | Intersection over Union，交并比 |
| FPS | Frames Per Second，帧率 |

---

**文档版本**：V1.0
**最后更新**：2026年01月27日
**编制单位**：[申请人姓名]
**版权所有**：保留所有权利
